<div class="container" *ngIf="lessonDetails$ | async as lesson">
  <div class="lesson-header">
    <a [routerLink]="['/courses', lesson.id]" class="back-link">
      <mat-icon>arrow_back</mat-icon>
      <span>Back to Course Details</span>
    </a>
    <h1>{{ lesson.title }}</h1>
    <p>{{ lesson.category }} | {{ lesson.difficulty }}</p>
  </div>

  <div class="lesson-content">
    <mat-card class="content-section">
      <mat-card-header>
        <mat-card-title>Theory</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>{{ lesson.content.theory }}</p>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-raised-button color="primary" (click)="completeLesson('theory')">Mark as Complete</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="content-section">
      <mat-card-header>
        <mat-card-title>Quiz</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p class="quiz-question">{{ lesson.content.quiz }}</p>
        <mat-form-field>
          <mat-label>Your Answer</mat-label>
          <input matInput>
        </mat-form-field>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-raised-button color="primary" (click)="completeLesson('quiz')">Submit & Complete</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="content-section">
      <mat-card-header>
        <mat-card-title>Coding Challenge</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="code-editor">
          <pre><code>{{ lesson.content.coding }}</code></pre>
        </div>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-raised-button color="primary" (click)="completeLesson('coding')">Run & Complete</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>

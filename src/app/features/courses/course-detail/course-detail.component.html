<div class="container" *ngIf="course$ | async as course">
  <div class="course-hero">
    <img [src]="course.imageUrl" [alt]="course.title" class="hero-image">
  </div>

  <div class="course-content">
    <h1>{{ course.title }}</h1>
    <p class="description">{{ course.description }}</p>

    <div class="course-main-info">
      <div class="rating-section">
        <div class="rating-summary">
          <span class="rating-value">{{ course.averageRating | number:'1.1-1' }}</span>
          <div class="stars">
            <mat-icon *ngFor="let i of [1,2,3,4,5]">{{ i <= course.averageRating ? 'star' : 'star_border' }}</mat-icon>
          </div>
          <span class="reviews-count" *ngIf="course.reviews">{{ course.reviews }} reviews</span>
        </div>

        <div class="user-rating-section">
          <h3>Rate this course</h3>
          <div class="rating-stars">
            <button mat-icon-button *ngFor="let i of [1,2,3,4,5]" (click)="rateCourse(i)" [class.selected]="i <= userRating">
              <mat-icon>{{ i <= userRating ? 'star' : 'star_outline' }}</mat-icon>
            </button>
          </div>
        </div>
      </div>
      <div class="metadata-section">
        <div class="meta-item" *ngIf="course.views">
          <span class="meta-label">Views</span>
          <span class="meta-value">{{ course.views | number }}</span>
        </div>
        <div class="meta-item" *ngIf="course.difficulty">
          <span class="meta-label">Difficulty</span>
          <span class="meta-value">{{ course.difficulty }}</span>
        </div>
        <div class="meta-item" *ngIf="course.duration">
          <span class="meta-label">Duration</span>
          <span class="meta-value">{{ course.duration }}</span>
        </div>
      </div>
    </div>

    <div class="enroll-action">
      <button mat-raised-button color="primary" class="enroll-button" (click)="enroll(course)">
        Enroll Now
      </button>
    </div>
  </div>
</div>
